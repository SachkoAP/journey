import { useEffect, useState } from "react";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";

const mockThemes = ["–ú—ã—Å–ª–∏", "–ó–∞–º–µ—Ç–∫–∏", "–ò–¥–µ–∏", "–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è", "–§–∏–ª–æ—Å–æ—Ñ–∏—è"];

const mockArticles = [
  {
    id: 1,
    title: "–ü–µ—Ä–≤—ã–π –ø–æ—Ç–æ–∫ —Å–æ–∑–Ω–∞–Ω–∏—è",
    date: "15.01.2026",
    text: "–°–µ–≥–æ–¥–Ω—è —è –∑–∞–¥—É–º–∞–ª—Å—è –æ —Ç–æ–º, –∫–∞–∫ –º—ã—Å–ª–∏ –ø–µ—Ä–µ–ø–ª–µ—Ç–∞—é—Ç—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π...",
    image: null,
    reactions: { "üî•": 3, "‚ù§Ô∏è": 5 },
  },
];

export default function LifeJournalApp() {
  const [isOwner, setIsOwner] = useState(false);

  useEffect(() => {
    const tg = window.Telegram?.WebApp;
    tg?.ready();

    const username = tg?.initDataUnsafe?.user?.username;
    if (username === "YOUR_USERNAME") {
      setIsOwner(true);
    }
  }, []);

  return (
    <div className="min-h-screen bg-neutral-100 p-4">
      {/* Header */}
      <div className="flex justify-between items-center mb-4">
        <h1 className="text-xl font-bold">–°–ø–∞–≥–µ—Ç—Ç–∏ –º–æ–∑–≥–∞</h1>
        {isOwner && <Button>–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é</Button>}
      </div>

      {/* Themes carousel */}
      <div className="flex gap-3 overflow-x-auto pb-3 mb-4">
        {mockThemes.map((theme) => (
          <Card key={theme} className="min-w-[80px] h-[80px] flex items-center justify-center text-center font-medium">
            {theme}
          </Card>
        ))}
        <Card className="min-w-[80px] h-[80px] flex items-center justify-center font-bold">–ï—â–µ</Card>
      </div>

      {/* Articles */}
      <div className="flex flex-col gap-4">
        {mockArticles.map((article) => (
          <Card key={article.id} className="rounded-2xl">
            <CardContent className="p-4">
              {article.image && (
                <img src={article.image} className="rounded-xl mb-3" />
              )}
              <h2 className="text-lg font-semibold">{article.title}</h2>
              <p className="text-sm text-neutral-500 mb-2">{article.date}</p>
              <p className="mb-3 text-neutral-800">{article.text}</p>
              <div className="flex gap-3 text-lg">
                {Object.entries(article.reactions).map(([emoji, count]) => (
                  <span key={emoji}>{emoji} {count}</span>
                ))}
              </div>
            </CardContent>
          </Card>
        ))}
      </div>
    </div>
  );
}
